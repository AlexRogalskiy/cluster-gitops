---
apiVersion: argoproj.io/v1alpha1
kind: ArgoCD
metadata:
  annotations:
    config.janz.cloud/managed-by: gitops
    config.janz.cloud/scm-url: git@github.com:PixelJonas/cluster-gitops.git
  labels:
    config.janz.cloud/component: instance
    config.janz.cloud/name: argocd-bootstrap
  name: argo-cluster
  namespace: argocd
spec:
  applicationInstanceLabelKey: argocd.argoproj.io/instance
  resourceExclusions: |
    - apiGroups:
      - tekton.dev
      clusters:
      - '*'
      kinds:
      - TaskRun
      - PipelineRun
  dex:
    openShiftOAuth: true
  grafana:
    enabled: true
    route:
      enabled: true
  prometheus:
    enabled: true
    route:
      enabled: true
  rbac:
    defaultPolicy: "role:readonly"
    policy: |
      g, argocdadmins, role:admin
    scopes: "[groups]"
  server:
    insecure: true
    route:
      enabled: true
      tls:
        insecureEdgeTerminationPolicy: Redirect
        termination: edge
